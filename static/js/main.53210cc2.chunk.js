(this["webpackJsonpreact-redux-todo-list"]=this["webpackJsonpreact-redux-todo-list"]||[]).push([[0],{37:function(t,e,n){"use strict";n.r(e);var i=n(1),c=n(0),r=n(11),o=n.n(r),a=n(5),d=n(7),s="ADD_TODO",l="EDIT_TODO",u="UPDATE_TODO",b="DELETE_TODO",j="TOGGLE_TODO",f="SET_FILTER",O={ALL:"all",COMPLETED:"completed",IMCOMPLETE:"imcomplete"},m=O.ALL,p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case f:return e.payload.filter;default:return t}},y=n(6),v=n(23),g=n(2),E={allIds:[],byIds:{}};var x=Object(d.b)({todos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s:var n=e.payload,i=n.id,c=n.content;return Object(g.a)(Object(g.a)({},t),{},{allIds:[].concat(Object(v.a)(t.allIds),[i]),byIds:Object(g.a)(Object(g.a)({},t.byIds),{},Object(y.a)({},i,{content:c,completed:!1,isEditing:!1}))});case u:var r=e.payload,o=r.id,a=r.content;return Object(g.a)(Object(g.a)({},t),{},{byIds:Object(g.a)(Object(g.a)({},t.byIds),{},Object(y.a)({},o,Object(g.a)(Object(g.a)({},t.byIds[o]),{},{content:a,isEditing:!t.byIds[o].isEditing})))});case l:var d=e.payload.id;return Object(g.a)(Object(g.a)({},t),{},{byIds:Object(g.a)(Object(g.a)({},t.byIds),{},Object(y.a)({},d,Object(g.a)(Object(g.a)({},t.byIds[d]),{},{isEditing:!t.byIds[d].isEditing})))});case b:var f=e.payload.id,O=Object.keys(t.byIds).filter((function(t){return Number(t)!==f})).reduce((function(e,n){return e[n]=t.byIds[n],e}),{});return{allIds:t.allIds.filter((function(t){return t!==f})),byIds:O};case j:var m=e.payload.id;return Object(g.a)(Object(g.a)({},t),{},{byIds:Object(g.a)(Object(g.a)({},t.byIds),{},Object(y.a)({},m,Object(g.a)(Object(g.a)({},t.byIds[m]),{},{completed:!t.byIds[m].completed})))});default:return t}},visibilityFilter:p}),T=Object(d.c)(x,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),h=n(3),I=n(14),_=0,N=function(t){return t.todos},L=function(t){return function(t){return N(t)?N(t).allIds:[]}(t).map((function(e){return function(t,e){return N(t)?Object(g.a)(Object(g.a)({},N(t).byIds[e]),{},{id:e}):{}}(t,e)}))},D=function(t,e){var n=e.some((function(t){return!0===t.isEditing}));return function(){t(n)}},C=n(4);function k(){var t=Object(h.a)(["\n  margin-left: 0.5rem;\n"]);return k=function(){return t},t}var w=Object(C.b)((function(t){var e=t.todos,n=t.addTodo,r=Object(c.useState)(""),o=Object(I.a)(r,2),a=o[0],d=o[1],s=D((function(t){a&&!t&&(n(a),d(""))}),e);return Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{onChange:function(t){return d(t.target.value)},value:a}),Object(i.jsx)("button",{className:"add-todo",onClick:s,children:"Add Todo"})]})}))(k()),F=Object(a.b)((function(t){return{todos:L(t)}}),{addTodo:function(t){return{type:s,payload:{id:++_,content:t}}}})(w),S=n(10),A=n.n(S);function M(){var t=Object(h.a)(["\n  margin-left: 0.5rem;\n"]);return M=function(){return t},t}function P(){var t=Object(h.a)(["\n  margin-left: 0.5rem;\n"]);return P=function(){return t},t}function R(){var t=Object(h.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return R=function(){return t},t}var U=C.b.div(R()),X=Object(C.b)((function(t){var e=t.todos,n=t.todo,r=t.toggleTodo,o=t.updateTodo,a=t.deleteTodo,d=t.editTodo,s=Object(c.useState)(""),l=Object(I.a)(s,2),u=l[0],b=l[1];Object(c.useEffect)((function(){var t;return n.isEditing&&O.current&&(t=setInterval((function(){O.current.focus()}),10)),function(){return clearInterval(t)}}),[n.isEditing]);var j=D((function(t){t||(b(n.content),d(n.id))}),e),f=D((function(t){if(!t)return n.isEditing?null:r(n.id)}),e),O=Object(c.useRef)(),m=n.isEditing?Object(i.jsx)("input",{className:A()("todo-item__text",n&&n.completed&&"todo-item__text--completed"),value:u,onChange:function(t){b(t.target.value)},ref:O,autoFocus:!0,onBlur:function(t){var e,n;t.relatedTarget&&(e=t.relatedTarget.classList.contains("update-todo"),n=t.relatedTarget.classList.contains("delete-todo")),e||n||alert("\u8acb\u7de8\u8f2f\u5b8c\u518d\u9032\u884c\u5176\u5b83\u64cd\u4f5c!")}}):Object(i.jsx)("span",{className:A()("todo-item__text",n&&n.completed&&"todo-item__text--completed"),children:n.content}),p=Object(i.jsx)(B,{className:"edit-todo",onClick:j,children:"Edit Todo"}),y=Object(i.jsx)(B,{className:"update-todo",onClick:function(){o(n.id,u)},children:"Update Todo"}),v=Object(i.jsx)(B,{className:"delete-todo",onClick:function(){var t;t=n.id,a(t)},children:"Delete Todo"});return Object(i.jsxs)(U,{children:[Object(i.jsxs)("li",{className:"todo-item",onClick:f,children:[n&&n.isEditing?"\ud83d\udcdd":n.completed?"\ud83d\udc4c":"\ud83d\udc4b"," ",m]}),Object(i.jsxs)("div",{children:[n.completed?null:n.isEditing?y:p,v]})]})}))(P()),B=C.b.button(M()),G=Object(a.b)((function(t){return{todos:L(t)}}),{toggleTodo:function(t){return{type:j,payload:{id:t}}},updateTodo:function(t,e){return{type:u,payload:{id:t,content:e}}},deleteTodo:function(t){return{type:b,payload:{id:t}}},editTodo:function(t){return{type:l,payload:{id:t}}}})(X);function J(){var t=Object(h.a)(["\n  margin-top: 1rem;\n  text-align: left;\n  list-style: none;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n"]);return J=function(){return t},t}var V=Object(C.b)((function(t){var e=t.todos,n=t.className;return Object(i.jsx)("ul",{className:n,children:e&&e.length?e.map((function(t){return Object(i.jsx)(G,{todo:t},"todo-".concat(t.id))})):"No todos, yay!"})}))(J()),q=Object(a.b)((function(t){return{todos:function(t,e){var n=L(t);switch(e){case O.COMPLETED:return n.filter((function(t){return t.completed}));case O.IMCOMPLETE:return n.filter((function(t){return!t.completed}));case O.ALL:default:return n}}(t,t.visibilityFilter)}}))(V);function z(){var t=Object(h.a)(["\n  margin-top: 1rem;\n  text-align: left;\n  list-style: none;\n"]);return z=function(){return t},t}var H=Object(C.b)((function(t){var e=t.activeFilter,n=t.todos,c=t.setFilter;return console.log(n.some((function(t){return!0===t.isEditing}))),Object(i.jsx)("div",{className:"visibility-filters",children:Object.keys(O).map((function(t){var r=O[t];return Object(i.jsx)("span",{className:A()("filter",r===e&&"filter--active"),onClick:function(){n.some((function(t){return!0===t.isEditing}))||c(r)},children:r},"visibility-filter-".concat(r))}))})}))(z()),K=Object(a.b)((function(t){return{activeFilter:t.visibilityFilter,todos:L(t)}}),{setFilter:function(t){return{type:f,payload:{filter:t}}}})(H);function Q(){var t=Object(h.a)(["\n  .todo-item {\n  font-family: monospace;\n  cursor: pointer;\n  line-height: 1.5;\n}\n\n .todo-item__text {\n   margin-right: 2rem;\n }\n.todo-item__text--completed {\n  text-decoration: line-through;\n  color: lightgray;\n}\n\n/** visibility filters **/\n.filter {\n  padding: 0.3rem 0;\n  margin: 0 0.3rem;\n  cursor: pointer;\n}\n.filter--active {\n  border-bottom: 1px solid black;\n}\n\n"]);return Q=function(){return t},t}var W=Object(C.a)(Q());function Y(){var t=Object(h.a)(["\n  font-family: sans-serif;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return Y=function(){return t},t}var Z=Object(C.b)((function(t){var e=t.className;return Object(i.jsxs)("div",{className:e,children:[Object(i.jsx)(W,{}),Object(i.jsx)("h1",{children:"Todo List"}),Object(i.jsx)(F,{}),Object(i.jsx)(q,{}),Object(i.jsx)(K,{})]})}))(Y());o.a.render(Object(i.jsx)(a.a,{store:T,children:Object(i.jsx)(Z,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.53210cc2.chunk.js.map