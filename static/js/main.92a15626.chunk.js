(this["webpackJsonpreact-redux-todo-list"]=this["webpackJsonpreact-redux-todo-list"]||[]).push([[0],{37:function(t,e,n){"use strict";n.r(e);var i=n(1),o=n(0),c=n(11),r=n.n(c),a=n(5),d=n(7),s="ADD_TODO",l="EDIT_TODO",u="UPDATE_TODO",b="DELETE_TODO",j="CLEAR_TODO",f="TOGGLE_TODO",O="SET_FILTER",m={ALL:"all",COMPLETED:"completed",IMCOMPLETE:"imcomplete"},y=m.ALL,p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case O:return e.payload.filter;default:return t}},v=n(6),g=n(23),E=n(2),x={allIds:[],byIds:{}};var T=Object(d.b)({todos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case s:var n=e.payload,i=n.id,o=n.content;return Object(E.a)(Object(E.a)({},t),{},{allIds:[].concat(Object(g.a)(t.allIds),[i]),byIds:Object(E.a)(Object(E.a)({},t.byIds),{},Object(v.a)({},i,{content:o,completed:!1,isEditing:!1}))});case u:var c=e.payload,r=c.id,a=c.content;return Object(E.a)(Object(E.a)({},t),{},{byIds:Object(E.a)(Object(E.a)({},t.byIds),{},Object(v.a)({},r,Object(E.a)(Object(E.a)({},t.byIds[r]),{},{content:a,isEditing:!t.byIds[r].isEditing})))});case l:var d=e.payload.id;return Object(E.a)(Object(E.a)({},t),{},{byIds:Object(E.a)(Object(E.a)({},t.byIds),{},Object(v.a)({},d,Object(E.a)(Object(E.a)({},t.byIds[d]),{},{isEditing:!t.byIds[d].isEditing})))});case b:var O=e.payload.id,m=Object.keys(t.byIds).filter((function(t){return Number(t)!==O})).reduce((function(e,n){return e[n]=t.byIds[n],e}),{});return{allIds:t.allIds.filter((function(t){return t!==O})),byIds:m};case j:var y=e.payload,p=y.allIds,T=y.byIds;return{allIds:p,byIds:T};case f:var I=e.payload.id;return Object(E.a)(Object(E.a)({},t),{},{byIds:Object(E.a)(Object(E.a)({},t.byIds),{},Object(v.a)({},I,Object(E.a)(Object(E.a)({},t.byIds[I]),{},{completed:!t.byIds[I].completed})))});default:return t}},visibilityFilter:p}),I=Object(d.c)(T,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),h=n(3),_=n(14),N=0,L=function(t){return t.todos},D=function(t){return function(t){return L(t)?L(t).allIds:[]}(t).map((function(e){return function(t,e){return L(t)?Object(E.a)(Object(E.a)({},L(t).byIds[e]),{},{id:e}):{}}(t,e)}))},C=function(t,e){var n=e.some((function(t){return!0===t.isEditing}));return function(){t(n)}},k=n(4);function w(){var t=Object(h.a)(["\n  margin-left: 0.5rem;\n"]);return w=function(){return t},t}var F=Object(k.b)((function(t){var e=t.todos,n=t.addTodo,c=t.clearTodo,r=Object(o.useState)(""),a=Object(_.a)(r,2),d=a[0],s=a[1],l=C((function(t){d&&!t&&(n(d),s(""))}),e);return Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{onChange:function(t){return s(t.target.value)},value:d}),Object(i.jsx)("button",{className:"add-todo",onClick:l,children:"Add Todo"}),Object(i.jsx)("button",{className:"delete-todo",onClick:function(){c()},children:"Clear Todo"})]})}))(w()),A=Object(a.b)((function(t){return{todos:D(t)}}),{addTodo:function(t){return{type:s,payload:{id:++N,content:t}}},clearTodo:function(){return{type:j,payload:{allIds:[],byIds:{}}}}})(F),S=n(10),M=n.n(S);function P(){var t=Object(h.a)(["\n  margin-left: 0.5rem;\n"]);return P=function(){return t},t}function R(){var t=Object(h.a)(["\n  margin-left: 0.5rem;\n"]);return R=function(){return t},t}function U(){var t=Object(h.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return U=function(){return t},t}var X=k.b.div(U()),B=Object(k.b)((function(t){var e=t.todos,n=t.todo,c=t.toggleTodo,r=t.updateTodo,a=t.deleteTodo,d=t.editTodo,s=Object(o.useState)(""),l=Object(_.a)(s,2),u=l[0],b=l[1];Object(o.useEffect)((function(){var t;return n.isEditing&&O.current&&(t=setInterval((function(){O.current.focus()}),10)),function(){return clearInterval(t)}}),[n.isEditing]);var j=C((function(t){t||(b(n.content),d(n.id))}),e),f=C((function(t){if(!t)return n.isEditing?null:c(n.id)}),e),O=Object(o.useRef)(),m=n.isEditing?Object(i.jsx)("input",{className:M()("todo-item__text",n&&n.completed&&"todo-item__text--completed"),value:u,onChange:function(t){b(t.target.value)},ref:O,autoFocus:!0,onBlur:function(t){var e,n;t.relatedTarget&&(e=t.relatedTarget.classList.contains("update-todo"),n=t.relatedTarget.classList.contains("delete-todo")),e||n||alert("\u8acb\u7de8\u8f2f\u5b8c\u518d\u9032\u884c\u5176\u5b83\u64cd\u4f5c!")}}):Object(i.jsx)("span",{className:M()("todo-item__text",n&&n.completed&&"todo-item__text--completed"),children:n.content}),y=Object(i.jsx)(G,{className:"edit-todo",onClick:j,children:"Edit Todo"}),p=Object(i.jsx)(G,{className:"update-todo",onClick:function(){r(n.id,u)},children:"Update Todo"}),v=Object(i.jsx)(G,{className:"delete-todo",onClick:function(){var t;t=n.id,a(t)},children:"Delete Todo"});return Object(i.jsxs)(X,{children:[Object(i.jsxs)("li",{className:"todo-item",onClick:f,children:[n&&n.isEditing?"\ud83d\udcdd":n.completed?"\ud83d\udc4c":"\ud83d\udc4b"," ",m]}),Object(i.jsxs)("div",{children:[n.completed?null:n.isEditing?p:y,v]})]})}))(R()),G=k.b.button(P()),J=Object(a.b)((function(t){return{todos:D(t)}}),{toggleTodo:function(t){return{type:f,payload:{id:t}}},updateTodo:function(t,e){return{type:u,payload:{id:t,content:e}}},deleteTodo:function(t){return{type:b,payload:{id:t}}},editTodo:function(t){return{type:l,payload:{id:t}}}})(B);function V(){var t=Object(h.a)(["\n  margin-top: 1rem;\n  text-align: left;\n  list-style: none;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n"]);return V=function(){return t},t}var q=Object(k.b)((function(t){var e=t.todos,n=t.className;return Object(i.jsx)("ul",{className:n,children:e&&e.length?e.map((function(t){return Object(i.jsx)(J,{todo:t},"todo-".concat(t.id))})):"No todos, yay!"})}))(V()),z=Object(a.b)((function(t){return{todos:function(t,e){var n=D(t);switch(e){case m.COMPLETED:return n.filter((function(t){return t.completed}));case m.IMCOMPLETE:return n.filter((function(t){return!t.completed}));case m.ALL:default:return n}}(t,t.visibilityFilter)}}))(q);function H(){var t=Object(h.a)(["\n  margin-top: 1rem;\n  text-align: left;\n  list-style: none;\n"]);return H=function(){return t},t}var K=Object(k.b)((function(t){var e=t.activeFilter,n=t.todos,o=t.setFilter;return console.log(n.some((function(t){return!0===t.isEditing}))),Object(i.jsx)("div",{className:"visibility-filters",children:Object.keys(m).map((function(t){var c=m[t];return Object(i.jsx)("span",{className:M()("filter",c===e&&"filter--active"),onClick:function(){n.some((function(t){return!0===t.isEditing}))||o(c)},children:c},"visibility-filter-".concat(c))}))})}))(H()),Q=Object(a.b)((function(t){return{activeFilter:t.visibilityFilter,todos:D(t)}}),{setFilter:function(t){return{type:O,payload:{filter:t}}}})(K);function W(){var t=Object(h.a)(["\n  .todo-item {\n  font-family: monospace;\n  cursor: pointer;\n  line-height: 1.5;\n}\n\n .todo-item__text {\n   margin-right: 2rem;\n }\n.todo-item__text--completed {\n  text-decoration: line-through;\n  color: lightgray;\n}\n\n/** visibility filters **/\n.filter {\n  padding: 0.3rem 0;\n  margin: 0 0.3rem;\n  cursor: pointer;\n}\n.filter--active {\n  border-bottom: 1px solid black;\n}\n\n"]);return W=function(){return t},t}var Y=Object(k.a)(W());function Z(){var t=Object(h.a)(["\n  font-family: sans-serif;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return Z=function(){return t},t}var $=Object(k.b)((function(t){var e=t.className;return Object(i.jsxs)("div",{className:e,children:[Object(i.jsx)(Y,{}),Object(i.jsx)("h1",{children:"Todo List"}),Object(i.jsx)(A,{}),Object(i.jsx)(z,{}),Object(i.jsx)(Q,{})]})}))(Z());r.a.render(Object(i.jsx)(a.a,{store:I,children:Object(i.jsx)($,{})}),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.92a15626.chunk.js.map